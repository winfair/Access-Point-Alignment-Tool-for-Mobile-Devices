/* /assets/styles.css */
/* Why: single shared stylesheet for all three HTML pages; mirrors original look exactly. */

/* ---------- Theme tokens ---------- */
:root{
  --bg:#040607;
  --panel:#0a0f0a;
  --text:#b2ffbd;
  --dim:#78b784;
  --muted:#40664a;
  --accent:#1b5120;
  --green:#2aff2a;
  --amber:#ffc04d;
  --red:#ff4d4d;
}

/* ---------- Base ---------- */
*{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
html, body { height:100%; margin:0; background:var(--bg); color:var(--text); font-family: ui-monospace, Menlo, Consolas, monospace; }
a { color: var(--text); }

/* ---------- Map container ---------- */
#map { position:fixed; inset:0; }
.maplibregl-canvas{ touch-action: manipulation !important; }

/* ---------- Combined heading graphic (arrow + line) ---------- */
#headingGraphic{ position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; z-index:4; overflow:visible; }
#headingGraphicLine{ stroke: rgba(178,255,189,0.9); stroke-width:2; stroke-linecap:round; }
#headingGraphicLine.aligned{ stroke: rgba(255,77,77,0.95) !important; filter: drop-shadow(0 0 12px rgba(255,77,77,.85)); stroke-width:3 !important; }
#headingGraphicArrow{ pointer-events:none; transform-origin:32px 32px; }
#headingGraphicArrow path{ fill:#b2ffbd; filter: drop-shadow(0 0 6px rgba(0,255,128,.25)); }
#headingGraphicArrow.aligned path{ fill: var(--red) !important; filter: drop-shadow(0 0 14px rgba(255,77,77,.95)); }

/* ---------- Status bar (top-left) ---------- */
.status{ position: fixed; left: 14px; top: 14px; z-index:10; display:flex; align-items:center; gap:10px; background:rgba(10,15,10,.72); border:1px solid rgba(178,255,189,.2); border-radius:999px; padding:6px 10px; backdrop-filter: blur(4px); line-height:1.25; }
.status-btn{ display:flex; align-items:center; gap:6px; background:rgba(10,15,10,.6); border:1px solid rgba(178,255,189,.18); color:var(--dim); padding:6px 10px; border-radius:999px; cursor:pointer; transition: background .15s ease; }
.status-btn:hover{ background:rgba(27,81,32,.25); }
.status-btn:focus-visible{ outline:1px solid rgba(178,255,189,.6); outline-offset:2px; }
.status .divider{ opacity:.5; }
.status .label{ color:var(--dim); }
.status-btn.ready .label{ color:var(--text); }
.status-btn.tracking{ background:rgba(27,81,32,.35); }
.status-btn.tracking .label{ color:var(--text); }
.dot{ width:8px; height:8px; border-radius:50%; background:var(--red); box-shadow:0 0 6px rgba(255,77,77,.5); flex: none; }
.dot.ok{ background:var(--green); box-shadow:0 0 6px rgba(42,255,42,.5); }
.status-msg{ flex:1; min-width:0; max-width:220px; color:var(--amber); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.status-msg.error{ color:var(--red); }
.status-msg.ok{ color:var(--green); }

/* ---------- Bottom sheet: offset slider ---------- */
.sheet{ position: fixed; left:0; right:0; bottom:0; z-index:6; padding:12px; background:linear-gradient(180deg, rgba(10,15,10,0), rgba(10,15,10,.92)); }
.row{ display:flex; align-items:center; justify-content:space-between; gap:12px; background:rgba(10,15,10,.8); border:1px solid rgba(178,255,189,.2); border-radius:12px; padding:8px 10px; }
.row label{ color:var(--dim); font-size:12px; white-space:nowrap; }
.row input[type="range"]{ width:100%; }
.val{ min-width:64px; text-align:right; color:var(--text); font-variant-numeric: tabular-nums; }

/* ---------- Waypoints UI ---------- */
#fab{ position:fixed; right:14px; bottom:96px; z-index:11; width:48px; height:48px; display:grid; place-items:center; background:rgba(10,15,10,.9); border:1px solid rgba(178,255,189,.24); border-radius:50%; backdrop-filter: blur(4px); cursor:pointer; box-shadow:0 10px 24px rgba(0,0,0,.45); }
#fab:hover{ background:rgba(10,15,10,1); }
#fab:focus-visible{ outline:1px solid rgba(178,255,189,.6); outline-offset:3px; }

#wpPanel{ position:fixed; right:14px; bottom:164px; z-index:12; width:min(340px, calc(100% - 28px)); background:rgba(10,15,10,.95); border:1px solid rgba(178,255,189,.24); border-radius:16px; padding:12px; display:none; box-shadow:0 12px 30px rgba(0,0,0,.5); }
#wpPanel.open{ display:block; }
.wp-title{ margin:0 0 8px; font-size:14px; color:var(--text); display:flex; justify-content:space-between; align-items:center; }
.wp-title .x{ display:inline-block; transform: rotate(45deg); font-size:18px; }
.wp-form{ display:grid; gap:8px; margin-bottom:10px; }
.wp-input{ width:100%; padding:8px 10px; border-radius:10px; border:1px solid rgba(178,255,189,.22); background:rgba(4,6,7,.6); color:var(--text); font-family:inherit; }
.wp-input::placeholder{ color:var(--dim); }
.wp-actions{ display:flex; gap:8px; }
.btn{ padding:6px 10px; border-radius:10px; border:1px solid rgba(178,255,189,.24); background:rgba(10,15,10,.9); color:var(--text); font:inherit; cursor:pointer; }
.btn:hover{ background:rgba(10,15,10,1); }
.btn.primary{ background:rgba(27,81,32,.35); }
.wp-list{ display:grid; gap:6px; max-height:40vh; overflow:auto; padding-right:4px; }
.wp-row{ display:flex; justify-content:space-between; align-items:center; gap:8px; background:rgba(4,6,7,.6); border:1px solid rgba(178,255,189,.18); border-radius:12px; padding:8px 10px; }
.wp-row .info{ display:grid; gap:2px; }
.wp-row .n{ color:var(--text); font-size:13px; }
.wp-row .c{ color:var(--dim); font-size:12px; }

/* Optional marker class (JS also sets inline styles) */
.wp-marker{ width:10px; height:10px; border-radius:50%; background:rgba(178,255,189,.9); box-shadow:0 0 8px rgba(178,255,189,.6); }

/* ---------- Top nav ---------- */
.nav { position: fixed; top: 0; right: 0; left: 0; height: 44px; display: flex; align-items: center; gap: 10px; padding: 0 12px; z-index: 3;
  background: linear-gradient(180deg, rgba(10,15,10,.8), rgba(10,15,10,0));
  -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px);
}
.nav a { color: var(--text); text-decoration: none; font-size: 13px; opacity: .8; }
.nav a:hover { opacity: 1; text-decoration: underline; }
.nav .spacer{ flex:1; }

/* ---------- Help overlay ---------- */
#helpOverlay { position: fixed; inset: 0; z-index: 40; display: none; align-items: center; justify-content: center; }
#helpOverlay.open { display: flex; }
.help-card { max-width: 720px; width: calc(100% - 28px); background: rgba(10,15,10,.92); border:1px solid rgba(178,255,189,.2); border-radius: 16px; padding: 16px; box-shadow: 0 12px 30px rgba(0,0,0,.5); color: var(--text); }
.help-card h2 { margin: 0 0 8px; font-size: 18px; }
.help-card p { margin: 8px 0; color: var(--dim); }
.help-card .btns { margin-top: 12px; display:flex; justify-content: flex-end; }

/* ---------- Focus overrides for accessibility ---------- */
button:focus-visible, a:focus-visible, input:focus-visible {
  outline: 1px solid rgba(178,255,189,.6);
  outline-offset: 2px;
}

/* ---------- Small screens ---------- */
@media (max-width: 380px){
  .status{ gap:6px; padding:6px 8px; }
  .status-msg{ max-width:160px; }
  #fab{ right:10px; bottom:88px; }
  #wpPanel{ right:10px; bottom:154px; width: calc(100% - 20px); }
}

/* ---------- Debug overlay (dev only) ---------- */
#debugToggle{ position: fixed; left: 12px; bottom: 12px; z-index: 60; width:36px; height:36px; border-radius:8px; background:rgba(10,15,10,.9); border:1px solid rgba(178,255,189,.16); display:grid; place-items:center; cursor:pointer; }
#debugToggle:hover{ background:rgba(10,15,10,1); }
#debugPanel{ position: fixed; left: 12px; bottom: 56px; z-index: 60; width: min(420px, calc(100% - 28px)); max-height: 48vh; overflow:auto; background: rgba(4,6,7,.96); border:1px solid rgba(178,255,189,.12); border-radius:12px; padding:8px; display:none; box-shadow:0 12px 30px rgba(0,0,0,.6); color:var(--text); font-size:12px; }
#debugPanel.open{ display:block; }
#debugPanel .hdr{ display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:6px; }
#debugPanel .hdr .title{ color:var(--dim); font-size:13px; }
#debugPanel .list{ display:flex; flex-direction:column; gap:6px; }
.dbg-row{ background:rgba(10,15,10,.6); border:1px solid rgba(178,255,189,.06); border-radius:8px; padding:8px; font-family:inherit; }
.dbg-row .ts{ color:var(--dim); font-size:11px; }
.dbg-row .coords{ color:var(--text); font-size:13px; margin-top:4px; }
.dbg-row .meta{ color:var(--dim); font-size:11px; margin-top:4px; }
